id: https://microbiomedata/schema
name: NMDC
title: NMDC Schema

notes:
  - "MetaCyc expansion assumes we're talking about metacyc reactions and not genes, compounds etc."
  - "removed/commented out the comfusing 'identifier' slot"
  - "removed/commented out all mentions and definitions of depth2 and subsurface_depth2"
  - "depth2 should now be migrated to the has_maximum_value part of depth"
  - "slots requested for Bioscales, but already available for Biosample : tot_phosp, tot_carb, tot_nitro_content, pH"
  - "informal ## section delimiters should be replaced with subsets ?"
  - "commented out insdc_biosample_identifiers insdc_secondary_sample_identifiers... need better understanding of id patterns (at least)"
  - "commented out several MIxS terms assigned to Biosample because the definitions of those terms were commented out in mixs.yaml dues to shared slot uris"
  - "resuming use of part_of to link Biosamples to Studies. eg releasing sample_link from that role"


description: >-
  Schema for National Microbiome Data Collaborative (NMDC).
  
  This schema is organized into distinct modules:
  
   * a set of core types for representing data values
   * the mixs schema (auto-translated from mixs excel)
   * annotation schema
   * the NMDC schema itself

license: https://creativecommons.org/publicdomain/zero/1.0/
version: 7.0.0
prefixes:
  COG: https://unknown.to.linter.org/
  EC: https://unknown.to.linter.org/
  EFO: http://identifiers.org/efo/
  GOLD: http://identifiers.org/gold/
  IMG.TAXON: http://identifiers.org/img.taxon/
  ISA: https://unknown.to.linter.org/
  MS: http://purl.obolibrary.org/obo/MS_
  MetaCyc: https://identifiers.org/metacyc.reaction/
  MetaNetX: https://unknown.to.linter.org/
  NCIT: http://purl.obolibrary.org/obo/NCIT_
  OBI: http://purl.obolibrary.org/obo/OBI_
  RetroRules: https://unknown.to.linter.org/
  UniProtKB: https://identifiers.org/uniprot/
  bare: https://unknown.to.linter.org/
  biolink: https://w3id.org/biolink/vocab/
  dcterms: http://purl.org/dc/terms/
  emsl: https://unknown.to.linter.org/
  gtpo: https://unknown.to.linter.org/
  igsn: https://app.geosamples.org/sample/igsn/
  insdc.srs: https://unknown.to.linter.org/
  jgi: https://unknown.to.linter.org/
  linkml: https://w3id.org/linkml/
  mgnify: https://unknown.to.linter.org/
  mixs: https://w3id.org/mixs/
  nmdc: https://w3id.org/nmdc/
  prov: http://www.w3.org/ns/prov#
  qud: http://qudt.org/1.1/schema/qudt#
  rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  schema: http://schema.org/
  skos: http://www.w3.org/2004/02/skos/core#
  wgs84: http://www.w3.org/2003/01/geo/wgs84_pos#
  xsd: http://www.w3.org/2001/XMLSchema#


default_prefix: nmdc
default_range: string

default_curi_maps:
  - obo_context
  - idot_context

emit_prefixes:
  - rdf
  - rdfs
  - skos
  - xsd

imports:
  - annotation
  - basic_slots
  - bioscales
  - core
  - external_identifiers
  - linkml:types
  - mixs
  - portal/emsl
  - portal/jgi_metagenomics
  - portal/jgi_metatranscriptomics
  - portal/mixs_inspired
  - portal/sample_id
  - prov
  - sample_prep
  - workflow_execution_activity

settings:
  id_nmdc_prefix: "^(nmdc)"
  #  id_typecode: "([a-z]{1,6})"
  id_shoulder: "([0-9][a-z]{0,6}[0-9])"
  id_blade: "([A-Za-z0-9]{1,})"
  id_version: "(\\.[A-Za-z0-9]{1,})*"
  id_locus: "(_[A-Za-z0-9_\\.-]+)?$"
  # class to typecode associations
  #  id_typecode_biosample: "bsm"
  #  id_typecode_study: "sty"
  #  id_typecode_biosample_processing: "bsmprc"
  #  id_typecode_omics_processing: "omprc"
  #  id_typecode_dataobject: "dobj"
  #  id_typecode_activity: "acty"
  #  id_typecode_named_thing: "nt"

subsets:
  sample subset:
    description: Subset consisting of entities linked to the processing of samples.  Currently,
      this subset consists of study, omics process, and biosample.
  data object subset:
    description: Subset consisting of the data objects that either inputs or outputs
      of processes or workflows.

classes:

  Database:
    tree_root: true
    aliases:
      - NMDC metadata object
    description: An abstract holder for any set of metadata and data. It does not
      need to correspond to an actual managed database top level holder class. When
      translated to JSON-Schema this is the 'root' object. It should contain pointers
      to other objects of interest
    slots:
      - activity_set
      - biosample_set
      - data_object_set
      - dissolving_activity_set
      - functional_annotation_set
      - genome_feature_set
      - mags_activity_set
      - material_sample_set
      - material_sampling_activity_set
      - metabolomics_analysis_activity_set
      - metagenome_annotation_activity_set
      - metagenome_assembly_set
      - metaproteomics_analysis_activity_set
      - metatranscriptome_activity_set
      - nom_analysis_activity_set
      - omics_processing_set
      - reaction_activity_set
      - read_qc_analysis_activity_set
      - read_based_taxonomy_analysis_activity_set
      - study_set
      - field_research_site_set
      - collecting_biosamples_from_site_set

    slot_usage:
      date_created:
        description: TODO
      etl_software_version:
        description: TODO
      metatranscriptome_activity_set:
        description: TODO

  FieldResearchSite:
    aliases:
      - research plot
    description: A site, outside of a laboratory, from which biosamples may be collected.
    is_a: Site
    #    is_a: NamedThing
    title: Field Research Site
    comments:
      - Provides grouping of biosamples at level that's more specific than belonging
        to the same study
      - be very clear that this could be part of a larger site
      - In Bioscales, one might say that rhizosphere soil and bulk soil from around
        the same plant were obtained at the same site. In this case, the site would
        correspond to one tree.
      - "might correspond to GOLD's identifier on a page like https://gold.jgi.doe.gov/biosample?id=Gb0305833"
    slot_usage:
      id:
        #        pattern: '^nmdc:frsite'
        structured_pattern:
          syntax: "{id_nmdc_prefix}:frsite-{id_shoulder}-{id_blade}{id_version}{id_locus}"
          interpolated: true
          partial_match: false

  CollectingBiosamplesFromSite:
    is_a: PlannedProcess
    title: Collecting Biosamples From Site
    slots:
      - has_inputs
      - has_outputs
    comments:
      - "this illustrates implementing a Biosample relation with a process class"
    slot_usage:
      has_inputs:
        range: Site
        #        range: NamedThing
        required: true
      has_outputs:
        range: Biosample
        required: true
      id:
        #        pattern: '^nmdc:clsite'
        structured_pattern:
          syntax: "{id_nmdc_prefix}:clsite-{id_shoulder}-{id_blade}{id_version}{id_locus}"
          interpolated: true
          partial_match: false


  DataObject:
    is_a: NamedThing
    in_subset:
      - data object subset
    description: 'An object that primarily consists of symbols that represent information.   Files,
      records, and omics data are examples of data objects.'
    notes:
      - removed previous id_prefixes value of GOLD, since we are now using pattern-based id validation
    slots:
      - file_size_bytes
      - md5_checksum
      - data_object_type
      - compression_type
      - was_generated_by
      - url
      - type
    slot_usage:
      name:
        required: true
      description:
        required: true
      id:
        #        pattern: '^nmdc:dobj'
        structured_pattern:
          syntax: "{id_nmdc_prefix}:dobj-{id_shoulder}-{id_blade}{id_version}{id_locus}"
          interpolated: true
          partial_match: false
  #    id_prefixes:
  #      - GOLD

  Biosample:
    is_a: MaterialEntity
    in_subset:
      - sample subset
    aliases:
      - sample
      - material sample
      - specimen
      - biospecimen
    description: >-
      Biological source material which can be characterized by an experiment.
    todos:
      - could add GOLD and EBI's biosample definitions to the alt_descriptions?
    notes:
      - removed previous id_prefixes value of GOLD, since we are now using pattern-based id validation
    alt_descriptions:
      embl.ena: A sample contains information about the sequenced source material.
        Samples are associated with checklists, which define the fields used to annotate
        the samples. Samples are always associated with a taxon.
    slots:
      - collected_from
      - type
      - img_identifiers
      - samp_name
      - biosample_categories
      - type
      - part_of

      ## Identifiers
      - id
      - alternative_identifiers

      ## external IDs, alternate IDs
      - gold_biosample_identifiers
      - insdc_biosample_identifiers
      #      - insdc_secondary_sample_identifiers
      - emsl_biosample_identifiers
      - igsn_biosample_identifiers

      ## MIXS slots
      - agrochem_addition
      - alkalinity
      - alkalinity_method
      - alkyl_diethers
      - alt
      - al_sat
      - al_sat_meth
      - aminopept_act
      - ammonium
      - annual_precpt
      - annual_temp
      - bacteria_carb_prod
      - bishomohopanol
      - bromide
      - calcium
      - carb_nitro_ratio
      - chem_administration
      - chloride
      - chlorophyll
      - collection_date
      - cur_land_use
      - cur_vegetation
      - cur_vegetation_meth
      - crop_rotation
      - density
      - depth
      - diss_carb_dioxide
      - diss_hydrogen
      - diss_inorg_carb
      - diss_inorg_phosp
      - diss_org_carb
      - diss_org_nitro
      - diss_oxygen
      - drainage_class
      - elev
      - env_package
      - env_broad_scale
      - env_local_scale
      - env_medium
      - extreme_event
      - fao_class
      - fire
      - flooding
      - geo_loc_name
      - glucosidase_act
      - heavy_metals
      - heavy_metals_meth
      #      - horizon
      #      - horizon_meth
      - lat_lon
      - link_addit_analys
      - link_class_info
      - link_climate_info
      - local_class
      - local_class_meth
      - magnesium
      - mean_frict_vel
      - mean_peak_frict_vel
      #      - microbial_biomass
      #      - microbial_biomass_meth
      - misc_param
      - n_alkanes
      - nitrate
      - nitrite
      - org_matter
      - org_nitro
      - organism_count
      - oxy_stat_samp
      - part_org_carb
      - perturbation
      - petroleum_hydrocarb
      - ph
      - ph_meth
      - phaeopigments
      - phosplipid_fatt_acid
      - pool_dna_extracts
      - potassium
      - pressure
      #      - previous_land_use
      #      - previous_land_use_meth
      - profile_position
      - redox_potential
      - salinity
      - salinity_meth
      #      - samp_collect_device
      - samp_mat_process
      - samp_store_dur
      - samp_store_loc
      - samp_store_temp
      - samp_vol_we_dna_ext
      - season_temp
      - season_precpt
      - sieving
      - size_frac_low
      - size_frac_up
      - slope_gradient
      - slope_aspect
      - sodium
      - soil_type
      - soil_type_meth
      - store_cond
      - sulfate
      - sulfide
      - temp
      #      - texture
      #      - texture_meth
      - tillage
      - tidal_stage
      - tot_carb
      - tot_depth_water_col
      - tot_diss_nitro
      - tot_org_carb
      - tot_org_c_meth
      - tot_nitro_content
      - tot_nitro_cont_meth
      - tot_phosp
      - water_content
      - water_cont_soil_meth

      ## GOLD path fields
      - ecosystem
      - ecosystem_category
      - ecosystem_type
      - ecosystem_subtype
      - specific_ecosystem

      ## GOLD specific fields
      - add_date
      - community
      - habitat
      - host_name
      - location
      - mod_date
      - ncbi_taxonomy_name
      - proport_woa_temperature
      - salinity_category
      - sample_collection_site
      - soluble_iron_micromol
      - subsurface_depth


      ## MIxS terms initially used in
      ## sample metadata submission portal (aka DataHarmonizer)
      - air_temp_regm
      - biotic_regm
      - biotic_relationship
      - climate_environment
      - experimental_factor
      - gaseous_environment
      - growth_facil
      - humidity_regm
      - light_regm
      #      - micro_biomass_meth
      - phosphate
      - rel_to_oxygen
      - samp_collec_method
      - samp_size
      #      - soil_text_measure
      #      - soil_texture_meth
      - source_mat_id
      - watering_regm

      ## sample metadata submission portal (aka DataHarmonizer) terms (EMSL, JGI, etc.)
      ## JGI fields
      - dna_absorb1
      - dna_absorb2
      - dna_collect_site
      - dna_concentration
      - dna_cont_type
      - dna_cont_well
      - dna_container_id
      - dna_dnase
      - dna_isolate_meth
      - dna_organisms
      - dna_project_contact
      - dna_samp_id
      - dna_sample_format
      - dna_sample_name
      - dna_seq_project
      - dna_seq_project_pi
      - dna_seq_project_name
      - dna_volume
      - proposal_dna
      - dnase_rna
      - proposal_rna
      - rna_absorb1
      - rna_absorb2
      - rna_collect_site
      - rna_concentration
      - rna_cont_type
      - rna_cont_well
      - rna_container_id
      - rna_isolate_meth
      - rna_organisms
      - rna_project_contact
      - rna_samp_id
      - rna_sample_format
      - rna_sample_name
      - rna_seq_project
      - rna_seq_project_pi
      - rna_seq_project_name
      - rna_volume

      # MIxS Inspired fields
      - collection_date_inc
      - collection_time
      - collection_time_inc
      - experimental_factor_other
      - filter_method
      - isotope_exposure
      - micro_biomass_c_meth
      - micro_biomass_n_meth
      - microbial_biomass_c
      - microbial_biomass_n
      - non_microb_biomass
      - non_microb_biomass_method
      - org_nitro_method
      - other_treatment
      - start_date_inc
      - start_time_inc
      - project_id
      - replicate_number
      - sample_shipped
      - sample_type
      - technical_reps
      - analysis_type
      - sample_link

      ## EMSL slots

      ## bioscales slots
      - zinc
      - manganese
      - ammonium_nitrogen
      - nitrate_nitrogen
      - nitrite_nitrogen
      - lbc_thirty
      - lbceq
    slot_usage:
      id:
        description: An NMDC assigned unique identifier for a biosample submitted to NMDC.
        required: true
        #        pattern: '^nmdc:bsm'
        structured_pattern:
          syntax: "{id_nmdc_prefix}:bsm-{id_shoulder}-{id_blade}{id_version}{id_locus}"
          interpolated: true
          partial_match: false

      gold_biosample_identifiers:
        description: Unique identifier for a biosample submitted to GOLD that matches the NMDC submitted biosample
        comments: This is the ID provided by GOLD that starts with 'GB'
        annotations:
          display_hint:
            tag: display_hint
            value: >-
              Provide the GOLD biosample IDs associated with this biosample.
      alternative_identifiers:
        description: Unique identifier for a biosample submitted to additional resources. Matches the entity that has been submitted to NMDC
        required: false

      lat_lon:
        required: false
        description: This is currently a required field but it's not clear if this
          should be required for human hosts
      env_broad_scale:
        required: true
      env_local_scale:
        required: true
      env_medium:
        required: true
      sample_link:
        description: { }
        required: false
      part_of:
        required: true

      extreme_event:
        examples:
          - value: 1980-05-18, volcanic eruption
        annotations:
          expected_value:
            tag: expected_value
            value: date, string
        range: string
    #    id_prefixes:
    #      - GOLD
    exact_mappings:
      - OBI:0000747
      - NCIT:C43412
      - http://purl.obolibrary.org/obo/FBcv_0003024

  Study:
    is_a: NamedThing
    in_subset:
      - sample subset
    aliases:
      - proposal
      - research proposal
      - research study
      - investigation
      - project
      - umbrella project
    description: >-
      A study summarizes the overall goal of a research initiative and outlines the key objective of its underlying projects.
    alt_descriptions:
      embl.ena: A study (project) groups together data submitted to the archive and
        controls its release date. A study accession is typically used when citing
        data submitted to ENA
    slots:
      ## Identifiers
      - id

      ## Alternative IDs
      - alternative_identifiers

      ## Related IDs
      - related_identifiers
      - emsl_proposal_identifier
      - emsl_proposal_doi
      - gold_study_identifiers
      #- insdc_bioproject_identifiers
      #- insdc_sra_ena_study_identifiers
      - mgnify_project_identifiers

      - ecosystem
      - ecosystem_category
      - ecosystem_type
      - ecosystem_subtype
      - specific_ecosystem
      - principal_investigator
      - doi
      - title
      - alternative_titles
      - alternative_descriptions
      - alternative_names
      - abstract
      - objective
      - websites
      - publications
      - ess_dive_datasets
      - type
      - relevant_protocols
      - funding_sources
      - has_credit_associations
      - study_image
    slot_usage:
      id:
        #        pattern: '^nmdc:sty'
        structured_pattern:
          syntax: "{id_nmdc_prefix}:sty-{id_shoulder}-{id_blade}{id_version}{id_locus}"
          interpolated: true
          partial_match: false

      doi:
        description: >-
          The dataset citation for this study
        annotations:
          display_hint:
            tag: display_hint
            value: >-
              DOI associated with the data in this study. This is required when data is already generated.
      name:
        description:
        annotations:
          display_hint:
            tag: display_hint
            value: Provide a name for the study your samples will belong with.
      websites:
        description:
        annotations:
          display_hint:
            tag: display_hint
            value: >-
              Link to the Principal Investigator's research lab webpage 
              or the study webpage associated with this collection of samples. 
              Multiple links can be provided.
      description:
        description: A brief summary that details the study you're submitted to NMDC
        annotations:
          display_hint:
            tag: display_hint
            value: >-
              Provide a brief description of your study.
      notes:
        description:
        annotations:
          display_hint:
            tag: display_hint
            value: >-
              Add any additional notes or comments about this study.
      alternative_identifiers:
        description: Unique identifier for a study submitted to additional resources. Matches that which has been submitted to NMDC
      alternative_names:
        description:
        annotations:
          display_hint:
            tag: display_hint
            value: >-
              Project, study, or sample set names the are also associated with this submission 
              or other names / identifiers for this study.
      related_identifiers:
        description: Unique identifier for a study submitted to additional resources. Similar, but not necessarily identical to that which has been submitted to NMDC
      insdc_bioproject_identifiers:
        description: Unique identifier for a bioproject submitted to INSDC that relates to the NMDC submitted study.
        annotations:
          display_hint:
            tag: display_hint
            value: >-
              Provide the NCBI BioProject Accession Number associated with the listed NCBI BioProject Title.
      emsl_project_identifier:
        description: The EMSL project ID that relates to the NMDC submitted study
      emsl_proposal_doi:
        description: The DOI for the EMSL awarded study that relates to the NMDC submitted study
    exact_mappings:
      - SIO:001066
      - NCIT:C63536
      - OBI:0000066
      - ISA:Study
    close_mappings:
      - NCIT:C41198
      - ISA:Investigation
    broad_mappings:
      - prov:Activity
    todos:
      - determine how to get data values for submitted_to_insdc, investigation_type,
        experimental_factor
      - project_name is redundant with name, so excluding it
    #    id_prefixes:
    #      - GOLD
    #      - insdc.srs
    #      - mgnify
    notes:
      - "sample GOLD link https://identifiers.org/gold:Gs0110115"
      - "sample insdc.srs link https://www.ebi.ac.uk/ena/browser/view/PRJEB45055 ?"
      - "sample mgnify link https://www.ebi.ac.uk/metagenomics/studies/MGYS00005757"
      - "GOLD, insdc.srs and mgnify are reasonable prefixes for alternative study identifiers, but no longer for the Study.id"

  BiosampleProcessing:
    aliases:
      - material processing
    is_a: NamedThing
    description: A process that takes one or more biosamples as inputs and generates
      one or as outputs. Examples of outputs include samples cultivated from another
      sample or data objects created by instruments runs.
    slots:
      - has_input
    slot_usage:
      id:
        #        pattern: '^nmdc:bsmprc'
        structured_pattern:
          syntax: "{id_nmdc_prefix}:bsmprc-{id_shoulder}-{id_blade}{id_version}{id_locus}"
          interpolated: true
          partial_match: false
      has_input:
        range: Biosample
    broad_mappings:
      - OBI:0000094

  OmicsProcessing:
    aliases:
      - omics assay
      - sequencing project
      - experiment
    is_a: BiosampleProcessing
    in_subset:
      - sample subset
    description: >-
      The methods and processes used to generate omics data from a biosample or organism.
    alt_descriptions:
      embl.ena: An experiment contains information about a sequencing experiment including
        library and instrument details.
    comments:
      - The ID prefix for objects coming from GOLD will be gold:Gp
    slots:
      - add_date
      - mod_date
      - has_input
      - has_output
      - instrument_name
      - ncbi_project_name
      - omics_type
      - part_of
      - principal_investigator
      - processing_institution
      - type
      - gold_sequencing_project_identifiers
      - insdc_experiment_identifiers
      - samp_vol_we_dna_ext
      - nucl_acid_ext
      - nucl_acid_amp
      - target_gene
      - target_subfragment
      - pcr_primers
      - pcr_cond
      - seq_meth
      - seq_quality_check
      - chimera_check

    slot_usage:
      id:
        #        pattern: '^nmdc:omprc'
        structured_pattern:
          syntax: "{id_nmdc_prefix}:omprc-{id_shoulder}-{id_blade}{id_version}{id_locus}"
          interpolated: true
          partial_match: false
      has_input:
        required: true
    broad_mappings:
      - OBI:0000070
      - ISA:Assay

  CreditAssociation:
    aliases:
      - study role
      - credit table
      - associated researchers
    description: >-
      This class supports binding associated researchers to studies. There will be at least a slot for a CRediT Contributor Role (https://casrai.org/credit/) and for a person value
      Specifically see the associated researchers tab on the NMDC_SampleMetadata-V4_CommentsForUpdates at https://docs.google.com/spreadsheets/d/1INlBo5eoqn2efn4H2P2i8rwRBtnbDVTqXrochJEAPko/edit#gid=0
    slots:
      - applies_to_person
      - applied_role
      - applied_roles
      - type
    class_uri: prov:Association

enums:
  biosample_category_enum:
    description: Funding-based, sample location-based, or experimental method-based defined categories
    aliases:
      - category tag
    notes:
      - Currently, these values can associated with biosamples via the biosample_categories slot
      - They might also be applicable to other classes
      - They are intended to enable metadata search and or filtering, for example in the NMDC data portal, https://data.microbiomedata.org/
    permissible_values:
      LTER:
        title: National Science Foundation's Long Term Ecological Research Network
        meaning: https://lternet.edu/
      SIP: { }
      SFA:
        title: Department of Energy Office of Science Biological and Environmental Research Program Laboratory Science Focus Areas
        description: Science Focus Area projects funded through the Department of Energy Office of Science Biological and Environmental Research Program
        meaning: https://science.osti.gov/ber/funding-opportunities/laboratory-scientific-focus-area-guidance
      FICUS:
        title: Facilities Integrating Collaborations for User Science
        meaning: https://jgi.doe.gov/user-programs/program-info/ficus-overview
      NEON:
        title: National Science Foundation's National Ecological Observatory Network
        meaning: https://www.neonscience.org
  file type enum:
    permissible_values:
      Metagenome Raw Reads:
        todos: add annotations
      FT ICR-MS Analysis Results:
        description: FT ICR-MS-based molecular formula assignment results table
      GC-MS Metabolomics Results:
        description: GC-MS-based metabolite assignment results table
      Metaproteomics Workflow Statistics:
        description: Aggregate workflow statistics file
      Protein Report:
        description: Filtered protein report file
      Peptide Report:
        description: Filtered peptide report file
      Unfiltered Metaproteomics Results:
        description: MSGFjobs and MASIC output file
      Read Count and RPKM:
        description: Annotation read count and RPKM per feature JSON
      QC non-rRNA R2:
        description: QC removed rRNA reads (R2) fastq
      QC non-rRNA R1:
        description: QC removed rRNA reads (R1) fastq
      Metagenome Bins:
        description: Metagenome bin contigs fasta
      CheckM Statistics:
        description: CheckM statistics report
      GOTTCHA2 Krona Plot:
        description: GOTTCHA2 krona plot HTML file
      GOTTCHA2 Classification Report:
        description: GOTTCHA2 classification report file
      GOTTCHA2 Report Full:
        description: GOTTCHA2 report file
      Kraken2 Krona Plot:
        description: Kraken2 krona plot HTML file
      Centrifuge Krona Plot:
        description: Centrifug krona plot HTML file
      Centrifuge output report file:
        description: Centrifug output report file
      Kraken2 Classification Report:
        description: Kraken2 output report file
      Kraken2 Taxonomic Classification:
        description: Kraken2 output read classification file
      Centrifuge Classification Report:
        description: Centrifuge output report file
      Centrifuge Taxonomic Classification:
        description: Centrifuge output read classification file
      Structural Annotation GFF:
        description: GFF3 format file with structural annotations
      Functional Annotation GFF:
        description: GFF3 format file with functional annotations
      Annotation Amino Acid FASTA:
        description: FASTA amino acid file for annotated proteins
      Annotation Enzyme Commission:
        description: Tab delimited file for EC annotation
      Annotation KEGG Orthology:
        description: Tab delimited file for KO annotation
      Assembly Coverage BAM:
        description: Sorted bam file of reads mapping back to the final assembly
      Assembly AGP:
        description: An AGP format file that describes the assembly
      Assembly Scaffolds:
        description: Final assembly scaffolds fasta
      Assembly Contigs:
        description: Final assembly contigs fasta
      Assembly Coverage Stats:
        description: Assembled contigs coverage information
      Filtered Sequencing Reads:
        description: Reads QC result fastq (clean data)
      QC Statistics:
        description: Reads QC summary statistics
      TIGRFam Annotation GFF:
        description: GFF3 format file with TIGRfam
        annotations:
          file_name_pattern: '[GOLD-AP]_tigrfam.gff'
      CRT Annotation GFF:
        description: GFF3 format file with CRT
      Genmark Annotation GFF:
        description: GFF3 format file with Genmark
      Prodigal Annotation GFF:
        description: GFF3 format file with Prodigal
      TRNA Annotation GFF:
        description: GFF3 format file with TRNA
      Misc Annotation GFF:
        description: GFF3 format file with Misc
      RFAM Annotation GFF:
        description: GFF3 format file with RFAM
      TMRNA Annotation GFF:
        description: GFF3 format file with TMRNA
      KO_EC Annotation GFF:
        description: GFF3 format file with KO_EC
      Product Names:
        description: Product names file
      Gene Phylogeny tsv:
        description: Gene Phylogeny tsv
      Crisprt Terms:
        description: Crisprt Terms
      Clusters of Orthologous Groups (COG) Annotation GFF:
        description: GFF3 format file with COGs
        annotations:
          file_name_pattern: '[GOLD-AP]_cog.gff'
      CATH FunFams (Functional Families) Annotation GFF:
        description: GFF3 format file with CATH FunFams
        annotations:
          file_name_pattern: '[GOLD-AP]_cath_funfam.gff'
      SUPERFam Annotation GFF:
        description: GFF3 format file with SUPERFam
        annotations:
          file_name_pattern: '[GOLD-AP]_supfam.gff'
      SMART Annotation GFF:
        description: GFF3 format file with SMART
        annotations:
          file_name_pattern: '[GOLD-AP]_smart.gff'
      Pfam Annotation GFF:
        description: GFF3 format file with Pfam
        annotations:
          file_name_pattern: '[GOLD-AP]_pfam.gff'
      Direct Infusion FT ICR-MS Raw Data:
        description: Direct infusion 21 Tesla Fourier Transform ion cyclotron resonance mass spectrometry raw data acquired in broadband full scan mode
  credit enum:
    permissible_values:
      Conceptualization:
        description: Conceptualization
      Data curation:
        description: Data curation
      Formal Analysis:
        description: Formal Analysis
      Funding acquisition:
        description: Funding acquisition
      Investigation:
        description: Investigation
      Methodology:
        description: Methodology
      Project administration:
        description: Project administration
      Resources:
        description: Resources
      Software:
        description: Software
      Supervision:
        description: Supervision
      Validation:
        description: Validation
      Visualization:
        description: Visualization
      Writing original draft:
        description: "Writing \u2013 original draft"
      Writing review and editing:
        description: "Writing \u2013 review & editing"
      Principal Investigator:
        description: principal investigator role
        meaning: OBI:0000103
      Submitter:
        description: the person(s) who enter study and biosmaple metadata into the NMDC submission portal
        meaning: EFO:0001741
    comments:
      - credit enums come from https://casrai.org/credit/
  processing_institution_enum:
    name: processing_institution_enum
    notes:
      - This will become the range of processing_institution.omics processing
      - use ROR meanings like https://ror.org/0168r3w48 for UCSD
    from_schema: NMDC_enums_roundtrip
    permissible_values:
      UCSD:
        text: UCSD
        title: University of California, San Diego
        meaning: https://ror.org/0168r3w48
      JGI:
        text: JGI
        title: Joint Genome Institute
        meaning: https://ror.org/04xm1d337
      EMSL:
        text: EMSL
        title: Environmental Molecular Sciences Laboratory
        meaning: https://ror.org/04rc0xn13
        notes:
          - replaces Environmental Molecular Science Laboratory
          - replaces Environmental Molecular Sciences Lab

slots:

  collected_from:
    description: The Site from which a Biosample was collected
    domain: Biosample
    range: FieldResearchSite
    comments:
      - this illustrates implementing a Biosample relation with a (binary) slot
    todos:
      - add an OBO slot_uri ?


  emsl_project_identifier: { }
  img_identifiers:
    title: IMG Identifiers
    description: >-
      A list of identifiers that relate the biosample to records in the IMG database.
    multivalued: true
    todos:
      - add is_a or mixin modeling
      - what are the class of IMG records?!

  emsl_biosample_identifiers:
    title: EMSL Biosample Identifiers
    description: >-
      A list of identifiers for the biosample from the EMSL database.  This is
      used to link the biosample, as modeled by NMDC, to the biosample in the planned EMSL NEXUS database.
    multivalued: true
    is_a: biosample_identifiers
    todos:
      - removed "planned" once NEXUS is online
      - make an emsl identifiers mixin
      - determine real expansion for emsl prefix

  igsn_biosample_identifiers:
    title: IGSN Biosample Identifiers
    description: >-
      A list of identifiers for the biosample from the IGSN database.
    multivalued: true
    is_a: biosample_identifiers
    todos:
      - make an igsn identifiers mixin
  biosample_categories:
    title: Categories the biosample belongs to
    range: biosample_category_enum
    multivalued: true
  date_created:
    description: from database class
  etl_software_version:
    description: from database class
  related_identifiers:
    title: Related Identifiers
    description: Identifiers assigned to a thing that is similar to that which is represented in NMDC. Related identifier are not an identical match and may have some variation.
  emsl_proposal_identifier:
    title: EMSL Proposal Identifier
    description: The proposal number assigned to the EMSL awarded study that relates to that which is represented in NMDC.
  emsl_proposal_doi:
    title: EMSL Proposal DOI
    description: The proposal DOI assigned to the awarded EMSL study.

  #- insdc_bioproject_identifiers
  #- insdc_sra_ena_study_identifiers

  notes:
    description: from study class

  canary:
    description: a slot that can be added and removed as evidence that schema changes have propagated to other systems
  ess_dive_datasets:
    multivalued: true
    description: List of ESS-DIVE dataset DOIs
  has_credit_associations:
    domain: Study
    range: CreditAssociation
    multivalued: true
    notes:
      - 'had just been "inlined: true"'
    inlined_as_list: true
    description: 'This slot links a study to a credit association.  The credit association
      will be linked to a person value and to a CRediT Contributor Roles term. Overall
      semantics: person should get credit X for their participation in the study'
    slot_uri: prov:qualifiedAssociation
    annotations:
      display_hint:
        tag: display_hint
        value: Other researchers associated with this study.
  study_image:
    domain: Study
    range: ImageValue
    multivalued: true
    inlined: true
    description: Links a study to one or more images.
  relevant_protocols:
    multivalued: true
    range: string
  funding_sources:
    multivalued: true
    range: string
  applied_role:
    domain: CreditAssociation
    range: credit enum
    slot_uri: prov:hadRole
    deprecated: A credit association may have multiple roles. So, use the applied
      roles slot.
    multivalued: false
    required: false
  applied_roles:
    domain: CreditAssociation
    range: credit enum
    multivalued: true
    required: true
    annotations:
      display_hint:
        tag: display_hint
        value: >-
          Identify all CRediT roles associated with this contributor. CRediT Information: https://info.orcid.org/credit-for-research-contribution ; CRediT: https://credit.niso.org/
  applies_to_person:
    domain: CreditAssociation
    range: PersonValue
    todos: prov:agent takes an Agent object. Is a person value an Agent? Also try
      to relate to principal investigator slot? could include OBI:0000103 principal
      investigator role... do we need to define the OBI prefix?
    multivalued: false
    required: true
    slot_uri: prov:agent
  object_set:
    mixin: true
    domain: Database
    multivalued: true
    inlined_as_list: true
    description: Applies to a property that links a database object to a set of objects.
      This is necessary in a json document to provide context for a list, and to allow
      for a single json object that combines multiple object types
  biosample_set:
    mixins: object_set
    domain: Database
    range: Biosample
    multivalued: true
    description: This property links a database object to the set of samples within
      it.
  study_set:
    mixins: object_set
    domain: Database
    range: Study
    multivalued: true
    description: This property links a database object to the set of studies within
      it.
  field_research_site_set:
    inlined_as_list: true
    multivalued: true
    range: FieldResearchSite
    domain: Database
  collecting_biosamples_from_site_set:
    inlined_as_list: true
    multivalued: true
    range: CollectingBiosamplesFromSite
    domain: Database
  data_object_set:
    mixins: object_set
    domain: Database
    range: DataObject
    multivalued: true
    description: This property links a database object to the set of data objects
      within it.
  genome_feature_set:
    mixins: object_set
    domain: Database
    range: GenomeFeature
    multivalued: true
    description: This property links a database object to the set of all features
  functional_annotation_set:
    mixins: object_set
    domain: Database
    range: FunctionalAnnotation
    multivalued: true
    description: This property links a database object to the set of all functional
      annotations
  activity_set:
    mixins: object_set
    domain: Database
    range: WorkflowExecutionActivity
    multivalued: true
    description: This property links a database object to the set of workflow activities.
  mags_activity_set:
    mixins: object_set
    domain: Database
    range: MagsAnalysisActivity
    multivalued: true
    description: This property links a database object to the set of MAGs analysis
      activities.
  metabolomics_analysis_activity_set:
    mixins: object_set
    domain: Database
    range: MetabolomicsAnalysisActivity
    multivalued: true
    description: This property links a database object to the set of metabolomics
      analysis activities.
  metaproteomics_analysis_activity_set:
    mixins: object_set
    domain: Database
    range: MetaproteomicsAnalysisActivity
    multivalued: true
    description: This property links a database object to the set of metaproteomics
      analysis activities.
  metagenome_annotation_activity_set:
    mixins: object_set
    domain: Database
    range: MetagenomeAnnotationActivity
    multivalued: true
    description: This property links a database object to the set of metagenome annotation
      activities.
  metagenome_assembly_set:
    mixins: object_set
    domain: Database
    range: MetagenomeAssembly
    multivalued: true
    description: This property links a database object to the set of metagenome assembly
      activities.
  metatranscriptome_activity_set:
    mixins: object_set
    domain: Database
    range: MetatranscriptomeActivity
    multivalued: true
    description: This property links a database object to the set of metatranscriptome
      analysis activities.
  read_qc_analysis_activity_set:
    mixins: object_set
    domain: Database
    range: ReadQcAnalysisActivity
    multivalued: true
    description: This property links a database object to the set of read QC analysis
      activities.
  read_based_taxonomy_analysis_activity_set:
    mixins: object_set
    domain: Database
    range: ReadBasedTaxonomyAnalysisActivity
    multivalued: true
    description: >-
      This property links a database object to the set of read based analysis activities.
  nom_analysis_activity_set:
    mixins: object_set
    domain: Database
    range: NomAnalysisActivity
    multivalued: true
    description: This property links a database object to the set of natural organic
      matter (NOM) analysis activities.
  omics_processing_set:
    mixins: object_set
    domain: Database
    range: OmicsProcessing
    multivalued: true
    description: This property links a database object to the set of omics processings
      within it.
  omics_type:
    range: ControlledTermValue
    description: The type of omics data
    examples:
      - value: metatranscriptome
      - value: metagenome
    notes:
      - "was the range string at one point? the values in MongoDB don't look like NMDC classes"
  data_object_type:
    range: file type enum
    description: The type of file represented by the data object.
    examples:
      - value: FT ICR-MS Analysis Results
      - value: GC-MS Metabolomics Results
  compression_type:
    range: string
    description: If provided, specifies the compression type
    examples:
      - value: gzip
    todos:
      - consider enum
  instrument_name:
    description: >-
      The name of the instrument that was used for processing the sample.
  ## GOLD PATHS
  gold_path_field:
    is_a: attribute
    range: string
    abstract: true
    description: >-
      This is a grouping for any of the gold path fields
  ecosystem:
    is_a: gold_path_field
    description: An ecosystem is a combination of a physical environment (abiotic
      factors) and all the organisms (biotic factors) that interact with this environment.
      Ecosystem is in position 1/5 in a GOLD path.
    comments: The abiotic factors play a profound role on the type and composition
      of organisms in a given environment. The GOLD Ecosystem at the top of the five-level
      classification system is aimed at capturing the broader environment from which
      an organism or environmental sample is collected. The three broad groups under
      Ecosystem are Environmental, Host-associated, and Engineered. They represent
      samples collected from a natural environment or from another organism or from
      engineered environments like bioreactors respectively.
    see_also: https://gold.jgi.doe.gov/help
  ecosystem_category:
    is_a: gold_path_field
    description: Ecosystem categories represent divisions within the ecosystem based
      on specific characteristics of the environment from where an organism or sample
      is isolated. Ecosystem category is in position 2/5 in a GOLD path.
    comments: The Environmental ecosystem (for example) is divided into Air, Aquatic
      and Terrestrial. Ecosystem categories for Host-associated samples can be individual
      hosts or phyla and for engineered samples it may be manipulated environments
      like bioreactors, solid waste etc.
    see_also: https://gold.jgi.doe.gov/help
  ecosystem_type:
    is_a: gold_path_field
    description: Ecosystem types represent things having common characteristics within
      the Ecosystem Category. These common characteristics based grouping is still
      broad but specific to the characteristics of a given environment. Ecosystem
      type is in position 3/5 in a GOLD path.
    comments: The Aquatic ecosystem category (for example) may have ecosystem types
      like Marine or Thermal springs etc. Ecosystem category Air may have Indoor air
      or Outdoor air as different Ecosystem Types. In the case of Host-associated
      samples, ecosystem type can represent Respiratory system, Digestive system,
      Roots etc.
    see_also: https://gold.jgi.doe.gov/help
  ecosystem_subtype:
    is_a: gold_path_field
    description: Ecosystem subtypes represent further subdivision of Ecosystem types
      into more distinct subtypes. Ecosystem subtype is in position 4/5 in a GOLD
      path.
    comments: Ecosystem Type Marine (Environmental -> Aquatic -> Marine) is further
      divided (for example) into Intertidal zone, Coastal, Pelagic, Intertidal zone
      etc. in the Ecosystem subtype category.
    see_also: https://gold.jgi.doe.gov/help
  specific_ecosystem:
    is_a: gold_path_field
    description: Specific ecosystems represent specific features of the environment
      like aphotic zone in an ocean or gastric mucosa within a host digestive system.
      Specific ecosystem is in position 5/5 in a GOLD path.
    comments: Specific ecosystems help to define samples based on very specific characteristics
      of an environment under the five-level classification system.
    see_also: https://gold.jgi.doe.gov/help
  principal_investigator:
    aliases:
      - PI
    is_a: attribute
    range: PersonValue
    description: Principal Investigator who led the study and/or generated the dataset.
  doi:
    is_a: attribute
    range: AttributeValue
  add_date:
    range: string
    description: The date on which the information was added to the database.
  mod_date:
    range: string
    description: The last date on which the database information was modified.
  ecosystem_path_id:
    range: string
    description: A unique id representing the GOLD classifers associated with a sample.
  habitat:
    range: string
  location:
    range: string
  community:
    range: string
  ncbi_taxonomy_name:
    range: string
  ncbi_project_name:
    range: string
  sample_collection_site:
    range: string
  #  identifier:
  #    slot_group: biosample_identifiers
  #    range: string
  #    todos:
  #      - used in MongoDB as of 2022-09-09, which is still on schema 3.?
  #      - we will remove this slot form the schema, but make sure to retain the content in MongoDB in a relevant, retained slot
  #      - Mark will do the MongoDB migration
  sample_collection_year:
    range: integer
  sample_collection_month:
    range: integer
  sample_collection_day:
    range: integer
  sample_collection_hour:
    range: integer
  sample_collection_minute:
    range: integer
  salinity_category:
    description: 'Categorcial description of the sample''s salinity. Examples: halophile,
      halotolerant, hypersaline, huryhaline'
    range: string
    see_also:
      - https://github.com/microbiomedata/nmdc-metadata/pull/297
    notes:
      - "maps to gold:salinity"
  soluble_iron_micromol:
    range: string
  host_name:
    range: string
  subsurface_depth:
    range: QuantityValue
  #  subsurface_depth2:
  #    range: QuantityValue
  proport_woa_temperature:
    range: string

  biogas_temperature:
    range: string
  soil_annual_season_temp:
    range: string

  biogas_retention_time:
    range: string
  processing_institution:
    range: processing_institution_enum
    description: The organization that processed the sample.

  completion_date:
    range: string
