id: https://microbiomedata/schema/core
name: NMDC-Core
title: NMDC Schema Core Types
description: >-
  Schema for National Microbiome Data Collaborative (NMDC), Core Types
license: https://creativecommons.org/publicdomain/zero/1.0/

prefixes:
  nmdc: https://microbiomedata/meta/
  mixs: https://w3id.org/gensc/
  wgs: http://www.w3.org/2003/01/geo/wgs84_pos
  qud: http://qudt.org/1.1/schema/qudt#
  dcterms: http://purl.org/dc/terms/
  schema: http://schema.org/
  MS: http://purl.obolibrary.org/obo/MS_
  igsnvoc: https://igsn.org/voc/v1/
  linkml: https://w3id.org/linkml/
  rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
  sio: http://semanticscience.org/resource/SIO_
  skos: http://www.w3.org/2004/02/skos/core#

default_prefix: nmdc
default_range: string

default_curi_maps:
  - obo_context
  - idot_context

imports:
  - linkml:types
  - basic_slots
  - prov
  
subsets:
  environment: {}
  investigation: {}
  mixs extension: {}
  nucleic acid sequence source: {}
  sequencing: {}
  soil: {}

types:

  bytes:
    description: >-
      An integer value that corresponds to a size in bytes
    base: int
    uri: xsd:int
    see_also:
      - UO:0000233
  
  decimal degree:
    description: >-
      A decimal degree expresses latitude or longitude as decimal fractions.
    uri: xsd:decimal
    base: float
    see_also:
      - https://en.wikipedia.org/wiki/Decimal_degrees
      
  language code:
    description: >-
      A language code conforming to ISO_639-1
    see_also:
      - https://en.wikipedia.org/wiki/ISO_639-1
    base: str
    uri: xsd:language

  unit:
    base: str
    uri: xsd:string
    mappings:
      - qud:Unit
      - UO:0000000


    
classes:

  named thing:
    description: "a databased entity or concept/class"
    abstract: true
    slots:
      - id
      - name
      - description
      - alternative identifiers
      
  ontology class:
    is_a: named thing

  environmental material term:
    is_a: ontology class

  attribute value:
    description: >-
      The value for any value of a attribute for a sample. This object can hold both the un-normalized atomic
      value and the structured value
    slots:
      - has raw value
      - was generated by
    slot_usage:
      type:
        description: >-
          An optional string that specified the type of object.
        required: false
    
  quantity value:
    is_a: attribute value
    description: >-
      A simple quantity, e.g. 2cm
    slots:
      - has unit
      - has numeric value
      - has minimum numeric value
      - has maximum numeric value
    slot_usage:
      has raw value:
        description: >-
          Unnormalized atomic string representation, should in syntax {number} {unit}
      has unit:
        description: >-
          The unit of the quantity
      has numeric value:
        description: >-
          The number part of the quantity
        range:
          double
    mappings:
      - schema:QuantityValue

  image value:
    is_a: attribute value
    description: >-
      An attribute value representing an image.
    slots:
      - url
      - description
      - display order
  
  person value:
    is_a: attribute value
    description: >-
      An attribute value representing a person
    slots:
      - orcid
      - profile image url
      - email
      - name
      - websites
    todos:
      - add additional fields e.g for institution
      - deprecate "has raw value" in favor of "name"
    slot_usage:
      has raw value:
        description: >-
          The full name of the Investgator in format FIRST LAST.
        notes: >-
          May eventually be deprecated in favor of "name".
      name:
        description: >-
          The full name of the Investgator.
          It should follow the format FIRST [MIDDLE NAME| MIDDLE INITIAL] LAST, where MIDDLE NAME| MIDDLE INITIAL is optional.


  person:
    is_a: named thing
    description: >-
      represents a person, such as a researcher
    comments:
      - "not yet in use"
    slot_usage:
      id:
        description: >-
          Should be an ORCID. Specify in CURIE format. E.g ORCID:0000-1111-...
  
  MAG bin:
    slots:
       - type  # custom slot that specifies object type
    attributes:
      bin name:
        range: string
      number of contig:
        range: integer
      completeness:
        range: float
      contamination:
        range: float
      gene count:
        range: integer
      bin quality:
        range: string
      num 16s:
        range: integer
      num 5s:
        range: integer
      num 23s:
        range: integer
      num tRNA:
        range: integer
      gtdbtk domain:
        required: false
        range: string
      gtdbtk phylum:
        required: false
        range: string
      gtdbtk class:
        required: false
        range: string
      gtdbtk order:
        required: false
        range: string
      gtdbtk family:
        required: false
        range: string
      gtdbtk genus:
        required: false
        range: string
      gtdbtk species:
        required: false
        range: string

  instrument:
    is_a: named thing
    aliases:
      - device
    description: >-
      A material entity that is designed to perform a function in a scientific investigation, but is not a reagent[OBI].
    exact_mappings:
      - OBI:0000485

  metabolite quantification:
    description: >-
      This is used to link a metabolomics analysis workflow to a specific metabolite
    slots:
      - alternative identifiers
    slot_usage:
      metabolite quantified:
        description: >-
          the specific metabolite identifier
        range: chemical entity
      highest similarity score:
        description: >-
          TODO: Yuri to fill in
        range: float
          
  peptide quantification:
    description: >-
      This is used to link a metaproteomics analysis workflow to a specific peptide sequence and related information
    slot_usage:
      peptide sequence:
        range: string
      best protein:
        description: >-
          the specific protein identifier most correctly associated with the peptide sequence
        range: gene product
      all proteins:
        description: >-
          the list of protein identifiers that are associated with the peptide sequence
        range: gene product
        multivalued: true
      min_q_value:
        description: >-
          smallest Q-Value associated with the peptide sequence as provided by MSGFPlus tool
        range: float
        see_also:
          - OBI:0001442
      peptide_spectral_count:
        description: >-
          sum of filter passing MS2 spectra associated with the peptide sequence within a given LC-MS/MS data file
        range: integer
      peptide_sum_masic_abundance:
        description: >-
          combined MS1 extracted ion chromatograms derived from MS2 spectra associated with the peptide sequence from a given LC-MS/MS data file using the MASIC tool
        range: integer
  
  protein quantification:
    description: >-
      This is used to link a metaproteomics analysis workflow to a specific protein
    slot_usage:
      best protein:
        description: >-
          the specific protein identifier most correctly grouped to its associated peptide sequences
        range: gene product
      all proteins:
        description: >-
          the grouped list of protein identifiers associated with the peptide sequences that were grouped to a best protein
        range: gene product
        multivalued: true
      peptide_sequence_count:
        description: >-
          count of peptide sequences grouped to the best_protein
        range: integer
      protein_spectral_count:
        description: >-
          sum of filter passing MS2 spectra associated with the best protein within a given LC-MS/MS data file
        range: integer
      protein_sum_masic_abundance:
        description: >-
          combined MS1 extracted ion chromatograms derived from MS2 spectra associated with the best protein from a given LC-MS/MS data file using the MASIC tool
        range: integer

  chemical entity:
    aliases:
      - metabolite
      - chemical substance
      - chemical compound
      - chemical
    is_a: ontology class
    description: >-
      An atom or molecule that can be represented with a chemical formula. Include lipids, glycans, natural products, drugs.
      There may be different terms for distinct acid-base forms, protonation states
    slot_usage:
      inchi:
        key: false
        multivalued: false
        range: string
      inchi key:
        key: false # rare; Pletnev I, Erin A, McNaught A, Blinov K, Tchekhovskoi D, Heller S (2012) InChIKey collision resistance: an experimental testing. J Cheminform. 4:12
        multivalued: false
        range: string
      smiles:
        description: >-
          A string encoding of a molecular graph, no chiral or isotopic information. There are usually a large number of valid SMILES which represent a given structure. For example, CCO, OCC and C(O)C all specify the structure of ethanol.
        multivalued: true
        range: string
      chemical formula:
        description: >-
          A generic grouping for miolecular formulae and empirican formulae
        multivalued: false
        key: false
        range: string
    see_also:
      - https://bioconductor.org/packages/devel/data/annotation/vignettes/metaboliteIDmapping/inst/doc/metaboliteIDmapping.html
    id_prefixes:
      - KEGG.COMPOUND
      - CHEBI
      - CHEMBL.COMPOUND
      - DRUGBANK
      - PUBCHEM.COMPOUND
      - CAS
      - HMDB
      - MESH
    exact_mappings:
      - biolink:ChemicalSubstance
      
  gene product:
    is_a: named thing
    description: >-
      A molecule encoded by a gene that has an evolved function
    comments:
      - we may include a more general gene product class in future to allow for ncRNA annotation
    id_prefixes:
      - UniProtKB
      - gtpo
      - PR
    exact_mappings:
      - biolink:GeneProduct

  text value:
    is_a: attribute value
    description: >-
      A basic string value
    slots:
      - language
      
  url value:
    is_a: attribute value
    description: >-
      A value that is a string that conforms to URL syntax

  timestamp value:
    is_a: attribute value
    description: >-
      A value that is a timestamp. The range should be ISO-8601
    #slots:
    #  - year
    #  - month
    #  - day

  integer value:
    is_a: attribute value
    description: >-
      A value that is an integer
    slots:
      - has numeric value

  boolean value:
    is_a: attribute value
    description: >-
      A value that is a boolean
    slots:
      - has boolean value
      
  controlled term value:
    is_a: attribute value
    description: >-
      A controlled term or class from an ontology
    slots:
      - term
    # TODO: add fields for ontology, branch

  geolocation value:
    is_a: attribute value
    description: >-
      A normalized value for a location on the earth's surface
    slots:
      - latitude
      - longitude
    slot_usage:
      has raw value:
        description: >-
          The raw value for a  geolocation should follow {lat} {long}
        # to_str: {latitude} {longitude}
    mappings:
      - schema:GeoCoordinates

slots:
    
  language:
    range: language code
    description: >-
      Should use ISO 639-1 code e.g. "en", "fr"

  attribute:
    aliases: ['field', 'property', 'template field', 'key', 'characteristic']
    abstract: true
    description: >-
      A attribute of a biosample. Examples: depth, habitat, material.
      For NMDC, attributes SHOULD be mapped to terms within a MIxS template
    
  has raw value:
    description: >-
      The value that was specified for an annotation in raw form, i.e. a string. E.g. "2 cm" or "2-4 cm"
    multivalued: false
    required: false
    domain: attribute value
    range: string
    
  has unit:
    description: >-
      Links a quantity value to a unit
    aliases:
      - scale
    range: unit
    mappings:
      - qud:unit
      - schema:unitCode

  has numeric value:
    description: >-
      Links a quantity value to a number
    multivalued: false
    range: float
    mappings:
      - qud:quantityValue
      - schema:value
  
  has minimum numeric value:
    is_a: has numeric value
    description: >-
      The minimum value part, expressed as number, of the quantity value when the value covers a range.

  has maximum numeric value:
    is_a: has numeric value
    description: >-
      The maximum value part, expressed as number, of the quantity value when the value covers a range.
  
  has boolean value:
    description: >-
      Links a quantity value to a boolean
    range: boolean
    multivalued: false
  
  latitude:
    domain: geolocation value
    range: decimal degree
    description: >-
      latitude
    slot_uri: wgs:lat
    mappings:
      - schema:latitude

  longitude:
    domain: geolocation value
    range: decimal degree
    description: >-
      longitude
    slot_uri: wgs:long
    mappings:
      - schema:longitude

  term:
    domain: controlled term value
    range: ontology class
    description: >-
      pointer to an ontology class
    slot_uri: rdf:type
    inlined: true
    
  orcid:
    description: >-
      The ORICD of a person.
    domain: person value
    range: string

  email:
    description: >-
      An email address for an entity such as a person.
      This should be the primarly email address used.
    range: string
    slot_uri: schema:email

  alternate emails:
    description: >-
      One or more other email addresses for an entity.
    range: string
    
  profile image url:
    description: >-
      A url that points to an image of a person.
    domain: person value
    range: string
  
  has input:
    aliases: ['input']
    domain: named thing
    range: named thing    
    multivalued: true
    description: >-
      An input to a process.
    
  has output:
    aliases: ['output']
    domain: named thing
    range: named thing
    multivalued: true
    description: >-
      An output biosample to a processing step

  part of:
    aliases: ['is part of']
    range: named thing
    domain: named thing
    multivalued: true
    slot_uri: dcterms:isPartOf
    description: >-
      Links a resource to another resource that either logically or physically includes it.
  
  execution resource:
    is_a: attribute
    description: >-
      Example: NERSC-Cori
      
  url:
    is_a: attribute
    range: string
    notes:
      - See issue 207 - this clashes with the mixs field
  
  display order:
    is_a: attribute
    description: >-
      When rendering information, this attribute to specify the order in which the information should be rendered.

  git url:
    is_a: attribute
    range: string
    description: >-
      Example: https://github.com/microbiomedata/mg_annotation/releases/tag/0.1
      
  file size bytes:
    is_a: attribute
    range: bytes
    description: >-
      Size of the file in bytes
  
  md5 checksum:
    is_a: attribute
    range: string
    description: >-
      MD5 checksum of file (pre-compressed)
  
  abstract:
    range: string
    description: >-
      The abstract of manuscript/grant associated with the entity; i.e., a summary of the resource.
    exact_mappings:
      - dcterms:abstract

  keywords:
    range: string
    multivalued: true
    description: >-
      A list of keywords that used to associate the entity.
      Keywords SHOULD come from controlled vocabularies, including MESH, ENVO.
    mappings:
      - dcterms:subject
  
  objective:
    range: string
    multivalued: false
    description: >-
      The scientific objectives associated with the entity.
      It SHOULD correspond to scientific norms for objectives field in a structured abstract.
    mappings:
      - sio:000337

  websites:
    range: string
    multivalued: true
    description: >-
      A list of websites that are assocatiated with the entity.

  publications:
    range: string
    multivalued: true
    description: >-
      A list of publications that are assocatiated with the entity.
      The publicatons SHOULD be given using an identifier, such as a DOI or Pubmed ID, if possible.
