id: https://w3id.org/nmdc/polymorphic_sample_prep_container
name: polymorphic_sample_prep_container
title: polymorphic sample prep container
description: an example of putting subclasses in a polymorphic container

comments:
  - Chris would prefer more lumping via an enumerated type designator
#  - unhelpful error message {'id': 'generic:Suspending_1', 'designated_class': 'nmdc:Suspending', 'has_input': [ 'generic:fines_1' ], 'has_output': [ 'generic:suspension_1' ] } "is not valid under any of the given schemas"

license: https://creativecommons.org/publicdomain/zero/1.0/

prefixes:
  linkml: https://w3id.org/linkml/
  nmdc: https://w3id.org/nmdc/

default_prefix: nmdc
default_range: string

imports:
  - linkml:types

classes:
  Campaign:
    is_a: PlannedProcess # so this inherits all PlannedProcess slots. They do not have to be restated here.
    description: A PlannedProces that has PlannedProcess parts. Can be used to represent the case of someone following a Protocol
    slots:
      - has_part
      - campaign_category
      - protocol_link
    comments:
      - "MAM 2023-10-06: I am intentionally using a new word here that isn't already overloaded in the model or in our discussions"
      - We can and should change it

  SamplePreparation:
    is_a: PlannedProcess
    slots:
      - designated_class

  Sieving:
    is_a: SamplePreparation
    class_uri: nmdc:Sieving
    comments:
      - Removes rocks from soil samples
    slots:
      - mesh_size_mm

  Suspending:
    is_a: SamplePreparation
    class_uri: nmdc:Suspending
    comments:
      - Suspends the sieved portion of soil samples in water
    slots:
      - stir_rate_rpm
      - stir_time_min

  Filtering:
    is_a: SamplePreparation
    class_uri: nmdc:Filtering
    comments:
      - Separates the suspended portion of soil samples from the water
    slots:
      - paper_grade

slots:
  sample_preparation_set:
    mixins:
      - object_set
    domain: Database
    range: SamplePreparation
  campaign_set:
    mixins:
      - object_set
    domain: Database
    range: Campaign
  mesh_size_mm:
    domain: Sieving
    range: float
    required: true
    comments:
      - The mesh size, in millimeters, used for sieving
  designated_class:
    range: uriorcurie
    slot_uri: rdf:type
    designates_type: true
    required: true
    comments:
      - The type of the object being designated
      - normally I would just call this slot type, but it looks like that might have some impact on legacy modeling
      - see https://microbiomedata.github.io/nmdc-schema/type/
  stir_rate_rpm:
    domain: Suspending
    range: float
    required: true
  stir_time_min:
    domain: Suspending
    range: float
    required: true
  paper_grade:
    domain: Filtering
    range: PaperGrade
    required: true
  campaign_category:
    domain: Campaign
    range: CampaignCategoryEnum
    required: true

enums:
  PaperGrade:
    permissible_values:
      - grade_1
      - grade_2
      - grade_3
      - grade_4
      - grade_602_h
  CampaignCategoryEnum:
    permissible_values:
      - obtaining_solutes
      - baking_cake
