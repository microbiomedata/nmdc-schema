id: https://w3id.org/nmdc/attribute_values
name: NMDC-Attribute-Values
title: AttributeValues classes from the NMDC Schema
description: AttributeValues classes from the NMDC Schema

comments:
  - broken out from core

license: https://creativecommons.org/publicdomain/zero/1.0/

imports:
  - prov
  - linkml:types

types:
  unit:
    base: str
    uri: xsd:string
    mappings:
      - qud:Unit
      - UO:0000000

  language code:
    description: A language code conforming to ISO_639-1
    see_also:
      - https://en.wikipedia.org/wiki/ISO_639-1
    base: str
    uri: xsd:language


  decimal degree:
    description: A decimal degree expresses latitude or longitude as decimal fractions.
    uri: xsd:decimal
    base: float
    see_also:
      - https://en.wikipedia.org/wiki/Decimal_degrees

prefixes:
  linkml: https://w3id.org/linkml/
  nmdc: https://w3id.org/nmdc/
  qud: http://qudt.org/1.1/schema/qudt#
  schema: http://schema.org/
  wgs84: http://www.w3.org/2003/01/geo/wgs84_pos#
  xsd: http://www.w3.org/2001/XMLSchema#
  UO: http://purl.obolibrary.org/obo/UO_

default_prefix: nmdc
default_range: string

classes:

  NamedThing:
    description: "a databased entity or concept/class"
    abstract: true
    slots:
      - id
      - name
      - description
      - alternative_identifiers

  AttributeValue:
    description: >-
      The value for any value of a attribute for a sample. This object can hold both the un-normalized atomic
      value and the structured value
    slots:
      - has_raw_value
      - was_generated_by
      - type
#    slot_usage:
#      type:
#        description: Historically, an optional string that specified the type of object.
#          we will be applying new constraints that type's values must be class_uris from this schema


  QuantityValue:
    is_a: AttributeValue
    description: A simple quantity, e.g. 2cm
    slots:
      - has_maximum_numeric_value
      - has_minimum_numeric_value
      - has_numeric_value
      - has_raw_value
      - has_unit
#    slot_usage:
#      has_raw_value:
#        description: Unnormalized atomic string representation, should in syntax {number} {unit}
#      has_unit:
#        description: The unit of the quantity
#      has_numeric_value:
#        description: The number part of the quantity
#        range: double
    mappings:
      - schema:QuantityValue


  TextValue:
    is_a: AttributeValue
    description: A basic string value
    slots:
      - language

  ControlledTermValue:
    is_a: AttributeValue
    description: A controlled term or class from an ontology
    slots:
      - term
    todos:
      - add fields for ontology, branch
        Is that addressed by structured enumerations?
        Or do we need to tease apart the prefix and local id here?

  OntologyClass:
    is_a: NamedThing
    notes:
      - The identifiers for terms from external ontologies can't have their ids constrained to the nmdc namespace
#    slot_usage:
#      id:
#        pattern: '^[a-zA-Z0-9][a-zA-Z0-9_\.]+:[a-zA-Z0-9_][a-zA-Z0-9_\-\/\.,]*$'

  TimestampValue:
    is_a: AttributeValue
    description: A value that is a timestamp. The has_raw_value should be an ISO-8601 string

  ControlledIdentifiedTermValue:
    description: A controlled term or class from an ontology, requiring the presence of term with an id
    notes:
      - To be used for slots like env_broad_scale
    is_a: ControlledTermValue
#    slot_usage:
#      term:
#        required: true

  GeolocationValue:
    is_a: AttributeValue
    description: A normalized value for a location on the earth's surface
    slots:
      - latitude
      - longitude
#    slot_usage:
#      has_raw_value:
#        string_serialization: "{latitude} {longitude}"
#      latitude:
#        required: true
#      longitude:
#        required: true
    mappings:
      - schema:GeoCoordinates

slots:
  has_raw_value:
    description: The value that was specified for an annotation in raw form, i.e. a string. E.g. "2 cm" or "2-4 cm"
    multivalued: false
    domain: AttributeValue
    range: string

  has_numeric_value:
    description: Links a quantity value to a number
    multivalued: false
    domain: QuantityValue
    range: float
    mappings:
      - qud:quantityValue
      - schema:value

  has_minimum_numeric_value:
    is_a: has_numeric_value
    domain: QuantityValue
    description: The minimum value part, expressed as number, of the quantity value when the value covers a range.

  has_maximum_numeric_value:
    is_a: has_numeric_value
    domain: QuantityValue
    description: The maximum value part, expressed as number, of the quantity value when the value covers a range.

  has_unit:
    description: Links a QuantityValue to a unit
    aliases:
      - scale
    domain: QuantityValue
    range: unit
    mappings:
      - qud:unit
      - schema:unitCode

  language:
    range: language code
    description: Should use ISO 639-1 code e.g. "en", "fr"

  term:
    domain: ControlledTermValue
    range: OntologyClass
    description: pointer to an ontology class
    inlined: true
    notes:
      - "removed 'slot_uri: rdf:type'"


  latitude:
    domain: GeolocationValue
    range: decimal degree
    description: latitude
    slot_uri: wgs84:lat
    examples:
      - value: -33.460524
    mappings:
      - schema:latitude

  longitude:
    domain: GeolocationValue
    range: decimal degree
    description: longitude
    slot_uri: wgs84:long
    examples:
      - value: 150.168149
    mappings:
      - schema:longitude