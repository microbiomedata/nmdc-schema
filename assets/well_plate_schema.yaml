name: well_plate
id: http://example.com/well_plate

prefixes:
  well_plate: http://example.com/well_plate/
  linkml: https://w3id.org/linkml/

imports:
  - linkml:types

classes:
  Biosample:
    rules:
      - description: Samples in plates must have a plate position that matches the regex
        preconditions:
          slot_conditions:
            dna_cont_type:
              equals_string: plate
        postconditions:
          slot_conditions:
            dna_cont_well:
              equals_string: C2
      - description: Samples in tubes can't have a plate position.
          But plate_position currently does have to be asserted as an empty string.
          Can't be null, None, un-asserted,etc.
          Had wanted to use value_present, but that may not be implemented in the linkml-runtime yet.
        preconditions:
          slot_conditions:
            dna_cont_type:
              equals_string: tube
        postconditions:
          slot_conditions:
            dna_cont_well:
              none_of:
                pattern: ".+"
    slots:
      - id
      - name
      - dna_cont_type
      - dna_cont_well
  Database:
    slots:
      - biosample_set

slots:
  id: { }
  name: { }
  dna_cont_type:
    examples:
      - value: plate
    range: dna_cont_type_enum
    required: true
  dna_cont_well:
    examples:
      - value: B2
#    pattern: ^(?!A1|A12|H1|H12)(([A-H][1-9])|([A-H]1[0-2]))$
  biosample_set:
    range: Biosample
    multivalued: true
    inlined_as_list: true

enums:
  dna_cont_type_enum:
    permissible_values:
      plate:
        text: plate
      tube:
        text: tube