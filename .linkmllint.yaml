# LinkML Linter Configuration for NMDC Schema
# All rules enabled with all default values explicitly stated
# See: https://linkml.io/linkml/schemas/linter.html
#
# Configuration philosophy:
# - All 7 available rules enabled (no masking)
# - All default values explicitly shown and commented
# - Full visibility into schema quality issues

extends: recommended

rules:
  # ==========================================
  # Rules included in "recommended" preset
  # ==========================================

  # Require recommended metamodel slots (like 'description')
  recommended:
    level: warning
    # include: []  # default: check all elements
    exclude:
      # Classes missing descriptions
      - LibraryPreparation
      - CollectingBiosamplesFromSite
      # Slots missing descriptions
      - biomaterial_purity
      - has_failure_categorization
      - count
      - sample_collection_year
      - sample_collection_month
      - library_preparation_kit
      - pcr_cycles
      - library_type
      - field_research_site_set
      - collecting_biosamples_from_site_set
      - sample_collection_day
      - sample_collection_hour
      - sample_collection_minute
      - biogas_temperature
      - soil_annual_season_temp
      - biogas_retention_time
      - completion_date
      - value
      - subject
      - predicate
      - object
      # Enums missing descriptions
      - CalibrationTargetEnum
      - CalibrationStandardEnum
      - MassSpectrometryAcquisitionStrategyEnum
      - ResolutionCategoryEnum
      - MassAnalyzerEnum
      - IonizationSourceEnum
      - MassSpectrumCollectionModeEnum
      - PolarityModeEnum
      - EluentIntroductionCategoryEnum
      - LibraryTypeEnum
      - ChromatographicCategoryEnum
      - SamplePortionEnum
    # exclude_type: []  # default: check all types (class_definition, slot_definition, enum_definition, permissible_value)

  # Enforce standard naming conventions
  standard_naming:
    level: warning
    # class_pattern: uppercamel  # default: uppercamel pattern ([A-Z][a-zA-Z0-9]+)
    # slot_pattern: snake  # default: snake pattern ([a-z][_a-z0-9]+)
    permissible_values_upper_case: false  # default: false (snake_case for PVs, not UPPER_SNAKE)
    exclude_type:
      - permissible_value  # Exclude PVs - they use scientific terminology (e.g., "DNA", "Orbitrap", "C18")

  # Validate that slot_usage references valid slots (CRITICAL - only error-level rule)
  no_invalid_slot_usage:
    level: error

  # Prefer xsd:integer over xsd:int
  no_xsd_int_type:
    level: warning

  # Check prefix mappings against prefixmaps standards
  # DISABLED: NMDC intentionally uses bioregistry prefixes which differ from
  # the default prefixmaps contexts (e.g., CATH uses bioregistry.io instead of identifiers.org)
  canonical_prefixes:
    level: disabled
    prefixmaps_contexts:
      - merged  # default: use merged context (combined from all sources)

  # ==========================================
  # Additional rules (not in "recommended")
  # ==========================================

  # Require titles on all schema elements
  no_empty_title:
    level: warning
    # exclude_type: []  # default: check all types (class_definition, slot_definition, enum_definition, permissible_value)

  # Enforce consistent permissible value formatting
  # DISABLED: NMDC uses scientific terminology as PV keys (e.g., "DNA", "Orbitrap", "C18")
  # These terms should be preserved as-is, not forced to snake_case
  permissible_values_format:
    level: disabled
    # format: snake  # default in base config: uppersnake; options: snake, uppersnake, camel, uppercamel, kebab, or custom regex

  # Require exactly one tree_root class
  tree_root_class:
    level: warning
    root_class_name: Database  # default: Container
    validate_existing_class_name: true  # default: false
